# Warden Protocol 自动化脚本

一个用于自动化完成 Warden Protocol 日常任务的 Python 脚本，支持多钱包批量操作和代理IP。

## 功能特性

- ✅ 自动登录验证（通过私钥签名）
- ✅ 自动解决 Cloudflare Turnstile 验证码
- ✅ 设置邀请码（默认：0PQIL）
- ✅ 完成每日聊天任务
- ✅ 完成每日游戏任务  
- ✅ 自动创建代币任务
- ✅ 多钱包批量处理
- ✅ 代理IP支持
- ✅ 失败重试机制
- ✅ 指定钱包运行功能

## 环境要求

- Python 3.7+
- 所需Python包：
  ```
  requests
  eth-account
  ```

## 安装依赖

```bash
pip install requests eth-account
```

## 配置文件

### 1. 私钥文件 (pk.txt)

在脚本目录下创建 `pk.txt` 文件，每行一个私钥：

```
0x1234567890abcdef...
0xabcdef1234567890...
0x9876543210fedcba...
```

### 2. 代理文件 (ip.txt)

在脚本目录下创建 `ip.txt` 文件，每行一个代理，格式为：`用户名:密码@IP:端口:协议`

```
username1:password1@192.168.1.1:8080:http
username2:password2@192.168.1.2:8080:https
username3:password3@192.168.1.3:8080:socks5
```

### 3. YesCaptcha API 密钥

在脚本中找到这一行并替换为你的API密钥：

```python
self.yescaptcha_key = "YOUR_YESCAPTCHA_API_KEY"
```

## 使用方法

### 基本用法

```python
# 运行所有钱包
automation = WardenAutomation()
automation.run()
```

### 指定钱包运行

```python
# 运行指定序号的钱包（序号从0开始）
automation = WardenAutomation(specified_indices=[0, 2, 4])  # 运行第1、3、5个钱包
automation.run()
```

### 重新运行失败的钱包

```python
# 根据上次运行失败的结果重新运行
automation = WardenAutomation(specified_indices=[1, 3])  # 重新运行第2、4个钱包
automation.run()
```

### 调整并发数

```python
# 控制同时运行的线程数（默认为3）
automation = WardenAutomation()
automation.run(max_workers=1)  # 单线程运行，更稳定
```

## 运行示例

```bash
python warden.py
```

## 输出示例

```
加载了 5 个私钥
加载了 3 个代理

=== 处理账户 1 ===
生成新的会话ID: 12345678-1234-5678-9abc-123456789abc
钱包地址: 0x1234567890123456789012345678901234567890
正在解决Cloudflare Turnstile验证...
Turnstile任务创建成功，任务ID: 12345
Turnstile验证成功
正在获取nonce...
获取nonce成功: abc123def456
正在使用EIP-4361协议签名...
签名成功
签名验证通过，继续获取认证token...
正在获取认证token...
获取认证token成功!
正在设置邀请码...
设置邀请码成功! referralCode: XYZ789
邀请码设置完成!
正在记录登录活动...
登录活动记录成功! 活动ID: activity_123
正在完成每日聊天任务...
每日聊天任务完成成功! 活动ID: chat_456
正在完成每日游戏任务...
每日游戏任务完成成功! 活动ID: game_789
正在完成创建代币任务...
创建代币任务完成成功! 代币名称: abc123
账户 1 所有任务完成成功!

=== 处理完成 ===
成功处理: 5 个账户
失败: 0 个账户
所有钱包处理成功!

=== 详细结果 ===
钱包1: 0x12345678... | 登录✓ 聊天✓ 游戏✓ 代币✓
钱包2: 0x23456789... | 登录✓ 聊天✓ 游戏✓ 代币✓
钱包3: 0x34567890... | 登录✓ 聊天✓ 游戏✓ 代币✓
钱包4: 0x45678901... | 登录✓ 聊天✓ 游戏✓ 代币✓
钱包5: 0x56789012... | 登录✓ 聊天✓ 游戏✓ 代币✓
```

## 任务说明

### 1. 登录验证
- 使用 EIP-4361 标准进行钱包签名登录
- 自动处理 Cloudflare Turnstile 验证码

### 2. 每日任务
- **聊天任务**：模拟用户聊天交互
- **游戏任务**：完成每日游戏活动
- **代币创建**：自动生成6位随机代币名称并创建

### 3. 邀请码设置
- 自动设置邀请码（默认：0PQIL）
- 可在代码中修改邀请码

## 重要提示

### 安全建议
- ⚠️ 私钥文件包含敏感信息，请妥善保管
- ⚠️ 不要将私钥文件上传到公共仓库
- ⚠️ 建议使用测试钱包进行初次运行

### 使用建议
- 🔄 失败重试：脚本内置重试机制，最多重试5次
- 🕐 运行频率：建议每24小时运行一次
- 🧵 并发控制：根据网络情况调整 max_workers 参数
- 🔀 代理轮换：脚本会自动为每个钱包分配不同代理

### 故障排除

1. **验证码解决失败**
   - 检查 YesCaptcha API 密钥是否正确
   - 确认账户余额充足

2. **网络连接问题**
   - 检查代理IP是否可用
   - 尝试降低并发数 (max_workers=1)

3. **私钥格式错误**
   - 确保私钥以 0x 开头
   - 检查私钥长度和格式

4. **任务已完成**
   - 某些任务每天只能完成一次
   - 脚本会自动跳过已完成的任务

## 免责声明

本脚本仅供学习和研究目的。使用者需要：
- 遵守相关法律法规
- 承担使用风险
- 妥善保管私钥信息

## 支持

如有问题或建议，请：
1. 检查配置文件格式
2. 查看错误日志
3. 降低并发数重试
4. 检查网络连接和代理设置

---

**注意**：请在使用前仔细阅读代码，确保理解其功能和风险。
